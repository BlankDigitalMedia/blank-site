@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    -webkit-tap-highlight-color: transparent;
    color-scheme: light;
    @apply bg-background;
    --background: oklch(0.9213 0.0687 77.4932);
    --foreground: oklch(0.3791 0 0);
    --card: oklch(0.9685 0.0282 79.4796);
    --card-foreground: oklch(0.3791 0 0);
    --popover: oklch(0.9685 0.0282 79.4796);
    --popover-foreground: oklch(0.3791 0 0);
    --primary: oklch(0.7554 0.1777 59.6859);
    --primary-foreground: oklch(1.0000 0 0);
    --secondary: oklch(0.7536 0.1626 130.5022);
    --secondary-foreground: oklch(0.3791 0 0);
    --muted: oklch(0.9739 0.0682 102.1886);
    --muted-foreground: oklch(0.5348 0 0);
    --accent: oklch(0.8058 0.1527 68.4276);
    --accent-foreground: oklch(0.3791 0 0);
    --destructive: oklch(0.6427 0.2153 28.8057);
    --destructive-foreground: oklch(1.0000 0 0);
    --border: oklch(0.8859 0.1539 91.2298);
    --input: oklch(0.9448 0.0756 91.8155);
    --ring: oklch(0.7554 0.1777 59.6859);
    --chart-1: oklch(0.7554 0.1777 59.6859);
    --chart-2: oklch(0.7536 0.1626 130.5022);
    --chart-3: oklch(0.8058 0.1527 68.4276);
    --chart-4: oklch(0.7049 0.1553 131.3844);
    --chart-5: oklch(0.7972 0.1638 69.6155);
    --radius: 1rem;
    --sidebar: oklch(0.9557 0.0615 92.1287);
    --sidebar-foreground: oklch(0.3791 0 0);
    --sidebar-primary: oklch(0.7554 0.1777 59.6859);
    --sidebar-primary-foreground: oklch(1.0000 0 0);
    --sidebar-accent: oklch(0.8058 0.1527 68.4276);
    --sidebar-accent-foreground: oklch(0.3791 0 0);
    --sidebar-border: oklch(0.8859 0.1539 91.2298);
    --sidebar-ring: oklch(0.7554 0.1777 59.6859);
    --font-sans: Alef, ui-sans-serif, sans-serif, system-ui;
    --font-serif: Abyssinica SIL, ui-serif, serif;
    --font-mono: Overpass Mono, ui-monospace, monospace;
    --shadow-color: #ffab40;
    --shadow-opacity: 0.4;
    --shadow-blur: 12px;
    --shadow-spread: 2px;
    --shadow-offset-x: 0px;
    --shadow-offset-y: 4px;
    --letter-spacing: 0em;
    --spacing: 0.25rem;
    --shadow-2xs: 0px 4px 12px 2px hsl(33.6126 100% 62.5490% / 0.20);
    --shadow-xs: 0px 4px 12px 2px hsl(33.6126 100% 62.5490% / 0.20);
    --shadow-sm: 0px 4px 12px 2px hsl(33.6126 100% 62.5490% / 0.40), 0px 1px 2px 1px hsl(33.6126 100% 62.5490% / 0.40);
    --shadow: 0px 4px 12px 2px hsl(33.6126 100% 62.5490% / 0.40), 0px 1px 2px 1px hsl(33.6126 100% 62.5490% / 0.40);
    --shadow-md: 0px 4px 12px 2px hsl(33.6126 100% 62.5490% / 0.40), 0px 2px 4px 1px hsl(33.6126 100% 62.5490% / 0.40);
    --shadow-lg: 0px 4px 12px 2px hsl(33.6126 100% 62.5490% / 0.40), 0px 4px 6px 1px hsl(33.6126 100% 62.5490% / 0.40);
    --shadow-xl: 0px 4px 12px 2px hsl(33.6126 100% 62.5490% / 0.40), 0px 8px 10px 1px hsl(33.6126 100% 62.5490% / 0.40);
    --shadow-2xl: 0px 4px 12px 2px hsl(33.6126 100% 62.5490% / 1.00);
    --tracking-normal: 0em;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      color-scheme: dark;
      --background: oklch(0.2478 0 0);
      --foreground: oklch(0.9702 0 0);
      --card: oklch(0.3092 0 0);
      --card-foreground: oklch(0.9702 0 0);
      --popover: oklch(0.3092 0 0);
      --popover-foreground: oklch(0.9702 0 0);
      --primary: oklch(0.7972 0.1638 69.6155);
      --primary-foreground: oklch(0.2478 0 0);
      --secondary: oklch(0.7185 0.1417 144.8887);
      --secondary-foreground: oklch(0.2478 0 0);
      --muted: oklch(0.3791 0 0);
      --muted-foreground: oklch(0.7984 0 0);
      --accent: oklch(0.8741 0.1102 76.4747);
      --accent-foreground: oklch(0.2478 0 0);
      --destructive: oklch(0.6083 0.2090 27.0276);
      --destructive-foreground: oklch(0.9702 0 0);
      --border: oklch(0.4926 0 0);
      --input: oklch(0.3791 0 0);
      --ring: oklch(0.7972 0.1638 69.6155);
      --chart-1: oklch(0.7972 0.1638 69.6155);
      --chart-2: oklch(0.7185 0.1417 144.8887);
      --chart-3: oklch(0.8741 0.1102 76.4747);
      --chart-4: oklch(0.6731 0.1624 144.2083);
      --chart-5: oklch(0.7703 0.1741 64.0539);
      --sidebar: oklch(0.2850 0 0);
      --sidebar-foreground: oklch(0.9702 0 0);
      --sidebar-primary: oklch(0.7972 0.1638 69.6155);
      --sidebar-primary-foreground: oklch(0.2478 0 0);
      --sidebar-accent: oklch(0.8741 0.1102 76.4747);
      --sidebar-accent-foreground: oklch(0.2478 0 0);
      --sidebar-border: oklch(0.4926 0 0);
      --sidebar-ring: oklch(0.7972 0.1638 69.6155);
    }
  }

  /* Global text selection styles */
  ::selection {
    background-color: var(--accent);
    color: var(--accent-foreground);
  }

  ::-moz-selection {
    background-color: var(--accent);
    color: var(--accent-foreground);
  }
  .theme {
    --font-sans: Alef, ui-sans-serif, sans-serif, system-ui;
    --font-mono: Overpass Mono, ui-monospace, monospace;
    --font-serif: Abyssinica SIL, ui-serif, serif;
    --radius: 1rem;
    --tracking-tighter: calc(var(--tracking-normal) - 0.05em);
    --tracking-tight: calc(var(--tracking-normal) - 0.025em);
    --tracking-wide: calc(var(--tracking-normal) + 0.025em);
    --tracking-wider: calc(var(--tracking-normal) + 0.05em);
    --tracking-widest: calc(var(--tracking-normal) + 0.1em);
  }

  body {
    letter-spacing: var(--tracking-normal);
  }
  .dark {
    --background: oklch(0.2478 0 0);
    --foreground: oklch(0.9702 0 0);
    --card: oklch(0.3092 0 0);
    --card-foreground: oklch(0.9702 0 0);
    --popover: oklch(0.3092 0 0);
    --popover-foreground: oklch(0.9702 0 0);
    --primary: oklch(0.7972 0.1638 69.6155);
    --primary-foreground: oklch(0.2478 0 0);
    --secondary: oklch(0.7185 0.1417 144.8887);
    --secondary-foreground: oklch(0.2478 0 0);
    --muted: oklch(0.3791 0 0);
    --muted-foreground: oklch(0.7984 0 0);
    --accent: oklch(0.8741 0.1102 76.4747);
    --accent-foreground: oklch(0.2478 0 0);
    --destructive: oklch(0.6083 0.2090 27.0276);
    --destructive-foreground: oklch(0.9702 0 0);
    --border: oklch(0.4926 0 0);
    --input: oklch(0.3791 0 0);
    --ring: oklch(0.7972 0.1638 69.6155);
    --chart-1: oklch(0.7972 0.1638 69.6155);
    --chart-2: oklch(0.7185 0.1417 144.8887);
    --chart-3: oklch(0.8741 0.1102 76.4747);
    --chart-4: oklch(0.6731 0.1624 144.2083);
    --chart-5: oklch(0.7703 0.1741 64.0539);
    --radius: 1rem;
    --sidebar: oklch(0.2850 0 0);
    --sidebar-foreground: oklch(0.9702 0 0);
    --sidebar-primary: oklch(0.7972 0.1638 69.6155);
    --sidebar-primary-foreground: oklch(0.2478 0 0);
    --sidebar-accent: oklch(0.8741 0.1102 76.4747);
    --sidebar-accent-foreground: oklch(0.2478 0 0);
    --sidebar-border: oklch(0.4926 0 0);
    --sidebar-ring: oklch(0.7972 0.1638 69.6155);
    --font-sans: Alef, ui-sans-serif, sans-serif, system-ui;
    --font-serif: Abyssinica SIL, ui-serif, serif;
    --font-mono: Overpass Mono, ui-monospace, monospace;
    --shadow-color: #ffcc80;
    --shadow-opacity: 0.4;
    --shadow-blur: 12px;
    --shadow-spread: 2px;
    --shadow-offset-x: 0px;
    --shadow-offset-y: 4px;
    --letter-spacing: 0em;
    --spacing: 0.25rem;
    --shadow-2xs: 0px 4px 12px 2px hsl(35.9055 100% 75.0980% / 0.20);
    --shadow-xs: 0px 4px 12px 2px hsl(35.9055 100% 75.0980% / 0.20);
    --shadow-sm: 0px 4px 12px 2px hsl(35.9055 100% 75.0980% / 0.40), 0px 1px 2px 1px hsl(35.9055 100% 75.0980% / 0.40);
    --shadow: 0px 4px 12px 2px hsl(35.9055 100% 75.0980% / 0.40), 0px 1px 2px 1px hsl(35.9055 100% 75.0980% / 0.40);
    --shadow-md: 0px 4px 12px 2px hsl(35.9055 100% 75.0980% / 0.40), 0px 2px 4px 1px hsl(35.9055 100% 75.0980% / 0.40);
    --shadow-lg: 0px 4px 12px 2px hsl(35.9055 100% 75.0980% / 0.40), 0px 4px 6px 1px hsl(35.9055 100% 75.0980% / 0.40);
    --shadow-xl: 0px 4px 12px 2px hsl(35.9055 100% 75.0980% / 0.40), 0px 8px 10px 1px hsl(35.9055 100% 75.0980% / 0.40);
    --shadow-2xl: 0px 4px 12px 2px hsl(35.9055 100% 75.0980% / 1.00);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground font-sans;
  }

  a:hover {
    @apply text-accent;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Newsletter-style post layout */
.post { @apply mx-auto max-w-[68ch] px-4 sm:px-6; }
.post :where(p, ul, ol, blockquote, pre, figure){ @apply my-6; }

/* title block */
.title-block{ @apply mb-8 space-y-3; }
.title{ @apply text-3xl sm:text-4xl font-semibold tracking-tight; }
.subtitle{ @apply text-base text-muted-foreground; }

/* meta chips */
.meta{ @apply flex flex-wrap gap-2 text-sm text-muted-foreground; }
.chip{ @apply inline-flex items-center rounded-full border px-2.5 py-1 bg-card opacity-70; }

/* headings for section turns */
.post h2{ @apply mt-12 mb-4 text-2xl font-semibold tracking-tight; }
.post h3{ @apply mt-10 mb-3 text-xl font-semibold; }

/* lead paragraph */
.lead{ @apply text-lg text-foreground opacity-90; }
/* First paragraph after title gets lead styling */
.post > p:first-of-type { @apply text-lg text-foreground opacity-90; }

/* pull quote */
.pull{ @apply my-10 border-l-4 pl-4 text-lg leading-relaxed; border-color: var(--accent); }
.pull cite{ @apply block pt-2 text-sm text-muted-foreground; }

/* figures */
.figure{ @apply my-8 overflow-hidden rounded-2xl border border-border bg-card shadow; }
.figure img,.figure video{ @apply block w-full h-auto; }
.caption{ @apply px-4 py-3 text-sm text-muted-foreground; }

/* divider */
.divider{ @apply my-10 h-px bg-border opacity-70 rounded; }

/* dark polish */
@media (prefers-color-scheme: dark){
  .figure, pre{ @apply bg-card opacity-70; }
  .divider{ @apply bg-border opacity-60; }
}

/* Terminal Bento Grid Styles */
@keyframes scanline {
  0% {
    top: -50%;
  }
  100% {
    top: 100%;
  }
}

@keyframes blink {
  from, to {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

.terminal-container {
  position: relative;
  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
  color: #00ff00;
  font-family: 'Courier New', monospace;
  padding: 2rem;
  border-radius: 1rem;
  border: 2px solid #00ff00;
  box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
  overflow: hidden;
}

.terminal-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent 0%, rgba(0, 255, 0, 0.1) 50%, transparent 100%);
  animation: scanline 2s linear infinite;
  pointer-events: none;
}

.bento-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
  margin-top: 2rem;
}

.bento-item {
  background: rgba(0, 255, 0, 0.1);
  border: 1px solid #00ff00;
  border-radius: 0.5rem;
  padding: 1rem;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.bento-item:hover {
  background: rgba(0, 255, 0, 0.2);
  box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
}

.bento-item::after {
  content: '';
  position: absolute;
  top: -100%;
  left: 0;
  right: 0;
  bottom: 100%;
  background: linear-gradient(90deg, transparent, rgba(0, 255, 0, 0.3), transparent);
  animation: scanline 3s linear infinite;
}

.blinking-cursor {
  animation: blink 1s infinite;
}

.col-span-2 {
  grid-column: span 2 / span 2;
}

.col-span-3 {
  grid-column: span 3 / span 3;
}